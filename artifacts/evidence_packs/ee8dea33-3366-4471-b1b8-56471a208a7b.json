{
  "request_id": "ee8dea33-3366-4471-b1b8-56471a208a7b",
  "timestamp": "2026-02-18T09:15:23.073115+00:00",
  "request_text": "Show complaint counts by product and state for the last 12 months",
  "user_attributes": {
    "role": "compliance_officer",
    "region": "all",
    "purpose": "reporting"
  },
  "policy_decision": {
    "result": "ALLOW",
    "reason": "Low sensitivity data allowed for all authenticated roles",
    "constraints_applied": {
      "min_group_size": 10,
      "must_aggregate_to_month": true
    }
  },
  "metrics": {
    "metric_ids": [
      "complaint_count"
    ],
    "metric_versions": {
      "complaint_count": "1.2.0"
    }
  },
  "data_products": {
    "products_used": [
      "dp_complaints"
    ],
    "product_versions": {
      "dp_complaints": "2.0.0"
    }
  },
  "data_quality": {
    "freshness": {
      "dp_complaints": null
    },
    "quality_checks": {
      "dp_complaints": true
    }
  },
  "sql": {
    "final_sql": "SELECT product, state, date_month, COUNT(*) AS complaint_count FROM dp_complaints WHERE 1=1 AND date_received >= CURRENT_DATE - INTERVAL '12 months' GROUP BY product, state, date_month HAVING COUNT(*) >= 10 ORDER BY product",
    "canonical_sql": "SELECT PRODUCT, STATE, DATE_MONTH, COUNT(*) AS COMPLAINT_COUNT FROM DP_COMPLAINTS WHERE 1=1 AND DATE_RECEIVED >= CURRENT_DATE - INTERVAL '12 MONTHS' GROUP BY PRODUCT, STATE, DATE_MONTH HAVING COUNT(*) >= 10 ORDER BY PRODUCT",
    "sql_hash": "81fa24c808a009f9c16862d2d2aa63d1f548caf28b7f0d8be943ecd21a302b7f"
  },
  "results": {
    "row_count": 45,
    "suppression_count": 0
  },
  "lineage": {
    "event_id": "01c63402-377d-4f22-adf1-e213623b3a4e"
  },
  "export": {
    "artifact_path": null
  }
}