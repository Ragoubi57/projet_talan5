{
  "request_id": "28fc98e1-8f12-4a3c-8b90-82d42635ad03",
  "timestamp": "2026-02-18T01:23:43.228299+00:00",
  "request_text": "Show me complaint narratives for investigations",
  "user_attributes": {
    "role": "compliance_officer",
    "region": "southeast",
    "purpose": "investigation"
  },
  "policy_decision": {
    "result": "ALLOW_WITH_CONSTRAINTS",
    "reason": "High sensitivity data allowed with masking and logging for compliance officer",
    "constraints_applied": {
      "forbid_export": false,
      "max_rows": 100,
      "min_group_size": 10,
      "must_log_access": true,
      "must_mask": true,
      "must_redact_narratives": true
    }
  },
  "metrics": {
    "metric_ids": [
      "complaint_count"
    ],
    "metric_versions": {
      "complaint_count": "1.2.0"
    }
  },
  "data_products": {
    "products_used": [
      "dp_complaints"
    ],
    "product_versions": {
      "dp_complaints": "2.0.0"
    }
  },
  "data_quality": {
    "freshness": {
      "dp_complaints": null
    },
    "quality_checks": {
      "dp_complaints": true
    }
  },
  "sql": {
    "final_sql": "SELECT product, COUNT(*) AS complaint_count, '[REDACTED]' AS consumer_narrative FROM dp_complaints WHERE 1=1 GROUP BY product HAVING COUNT(*) >= 10 ORDER BY product LIMIT 100",
    "canonical_sql": "SELECT PRODUCT, COUNT(*) AS COMPLAINT_COUNT, '[REDACTED]' AS CONSUMER_NARRATIVE FROM DP_COMPLAINTS WHERE 1=1 GROUP BY PRODUCT HAVING COUNT(*) >= 10 ORDER BY PRODUCT LIMIT 100",
    "sql_hash": "913a7d91b8d32c296280d1aa171bf6ba5f80f6f772053121b077333cd2c0b3cf"
  },
  "results": {
    "row_count": 10,
    "suppression_count": 0
  },
  "lineage": {
    "event_id": "5fc3e0b2-30e8-4398-81c8-5d352d088b9e"
  },
  "export": {
    "artifact_path": null
  }
}